<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Automatic Bug Report System on 0G</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    // Configure Tailwind for dark mode
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            dark: {
              900: '#0f172a',
              800: '#1e293b',
              700: '#334155',
              600: '#475569',
              500: '#64748b',
              400: '#94a3b8',
              300: '#cbd5e1',
              200: '#e2e8f0',
              100: '#f1f5f9',
            }
          }
        }
      }
    }
  </script>
</head>
<body class="dark:bg-white-900">
  <div id="root"></div>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
  <script type="text/javascript">
    // Simple approach - create React component and render it
    const BugTrackerApp = () => {
      const [bugs, setBugs] = React.useState([]);
      const [filteredBugs, setFilteredBugs] = React.useState([]);
      const [searchTerm, setSearchTerm] = React.useState('');
      const [selectedSeverity, setSelectedSeverity] = React.useState('all');
      const [selectedType, setSelectedType] = React.useState('all');
      const [selectedBug, setSelectedBug] = React.useState(null);
      const [isAdmin, setIsAdmin] = React.useState(false);
      const [showLogin, setShowLogin] = React.useState(false);
      const [email, setEmail] = React.useState('');
      const [password, setPassword] = React.useState('');
      const [uploading, setUploading] = React.useState(false);
      const [loading, setLoading] = React.useState(false);
      const [message, setMessage] = React.useState(null);
      const [fileHash, setFileHash] = React.useState(null); // To store the 0G file hash
      const [adminCredentials, setAdminCredentials] = React.useState(null); // To store admin credentials
      const [reportQuery, setReportQuery] = React.useState('');
      const [reportResult, setReportResult] = React.useState(null);
      const [reportSearching, setReportSearching] = React.useState(false);
      const [reportMessage, setReportMessage] = React.useState(null);
      const [reportExplanation, setReportExplanation] = React.useState(null);
      const [reportExplanationLoading, setReportExplanationLoading] = React.useState(false);

      const explanationHtml = React.useMemo(() => {
        if (!reportExplanation) {
          return null;
        }
        if (window.marked && typeof window.marked.parse === 'function') {
          return window.marked.parse(reportExplanation);
        }
        return reportExplanation.replace(/\\n/g, '<br />');
      }, [reportExplanation]);

      // Function to fetch admin credentials
      const fetchAdminCredentials = async () => {
        try {
          const response = await fetch('/api/admin-credentials');
          const data = await response.json();
          setAdminCredentials(data);
        } catch (error) {
          console.error('Failed to fetch admin credentials:', error);
          // Fallback to default credentials if fetch fails
          setAdminCredentials({
            email: 'admin@example.com',
            password: 'dummy'
          });
        }
      };

      // Function to handle admin mode toggle
      const handleAdminToggle = () => {
        if (isAdmin) {
          // Switching from Admin to User mode
          setIsAdmin(false);
        } else {
          // Switching to Admin mode - show login
          fetchAdminCredentials().then(() => {
            setShowLogin(true);
          });
        }
      };

      // Function to handle login
      const handleLogin = (e) => {
        e.preventDefault();
        // Validate against environment variables
        if (adminCredentials) {
          if (email === adminCredentials.email && password === adminCredentials.password) {
            // Credentials match
            setIsAdmin(true);
            setShowLogin(false);
            setEmail('');
            setPassword('');
            showMessage('Successfully logged in as admin', 'success');
          } else {
            // Invalid credentials
            showMessage('Invalid email or password', 'error');
          }
        } else {
          showMessage('Unable to verify credentials. Please try again.', 'error');
        }
      };

      React.useEffect(() => {
        loadBugs();
        loadFileHash(); // Load the last uploaded file hash
      }, []);

      React.useEffect(() => {
        filterBugs();
      }, [bugs, searchTerm, selectedSeverity, selectedType]);

      const loadBugs = async () => {
        setLoading(true);
        try {
          const response = await fetch('/api/bugs');
          const data = await response.json();
          setBugs(data);
          showMessage('Bugs loaded successfully', 'success');
        } catch (error) {
          showMessage('Failed to load bugs: ' + error.message, 'error');
        }
        setLoading(false);
      };

      const loadFileHash = async () => {
        try {
          const response = await fetch('/api/file-hash');
          const data = await response.json();
          setFileHash(data.rootHash);
        } catch (error) {
          console.error('Failed to load file hash:', error);
        }
      };

      const filterBugs = () => {
        let filtered = [...bugs];
        
        if (searchTerm) {
          const term = searchTerm.toLowerCase();
          filtered = filtered.filter(bug => 
            bug.id.toLowerCase().includes(term) ||
            bug.project.toLowerCase().includes(term) ||
            bug.component.toLowerCase().includes(term) ||
            bug.type.toLowerCase().includes(term)
          );
        }
        
        if (selectedSeverity !== 'all') {
          filtered = filtered.filter(bug => bug.severity === selectedSeverity);
        }
        
        if (selectedType !== 'all') {
          filtered = filtered.filter(bug => bug.type === selectedType);
        }
        
        setFilteredBugs(filtered);
      };

      const handleFileUpload = async (e) => {
        const file = e.target.files[0];
        if (!file) return;

        setUploading(true);
        const formData = new FormData();
        formData.append('file', file);

        try {
          const response = await fetch('/api/upload', {
            method: 'POST',
            body: formData
          });
          
          if (!response.ok) throw new Error('Upload failed');
          
          const result = await response.json();
          if (result.rootHash) {
            setFileHash(result.rootHash);
          }
          
          showMessage('File uploaded successfully to 0G storage', 'success');
          await loadBugs();
        } catch (error) {
          showMessage('Upload failed: ' + error.message, 'error');
        }
        setUploading(false);
        e.target.value = '';
      };

      const downloadFrom0G = async () => {
        if (!fileHash) {
          showMessage('No file hash available. Please upload a file first.', 'error');
          return;
        }

        setLoading(true);
        try {
          const response = await fetch(`/api/download/${fileHash}`);
          
          if (!response.ok) throw new Error('Download failed');
          
          const result = await response.json();
          setBugs(result.data);
          setFilteredBugs(result.data);
          showMessage('File downloaded successfully from 0G storage', 'success');
        } catch (error) {
          showMessage('Download failed: ' + error.message, 'error');
        }
        setLoading(false);
      };

      const downloadBugs = () => {
        const dataStr = JSON.stringify(bugs, null, 2);
        const dataBlob = new Blob([dataStr], { type: 'application/json' });
        const url = URL.createObjectURL(dataBlob);
        const link = document.createElement('a');
        link.href = url;
        link.download = `bugs-${new Date().toISOString().split('T')[0]}.json`;
        link.click();
        URL.revokeObjectURL(url);
        showMessage('Downloaded successfully', 'success');
      };

      const handleLoadReportExplanation = async () => {
        if (!reportResult || !reportResult.slug) {
          setReportMessage('No explanation available for this report.');
          return;
        }

        setReportExplanationLoading(true);
        setReportMessage(null);

        try {
          const response = await fetch(`/api/reports/${encodeURIComponent(reportResult.slug)}/explain`);
          const data = await response.json();

          if (response.ok && data.success) {
            setReportExplanation(data.markdown);
          } else {
            setReportExplanation(null);
            setReportMessage(data.message || 'Explanation not available for this report.');
          }
        } catch (error) {
          console.error('Failed to load explanation:', error);
          setReportExplanation(null);
          setReportMessage('Failed to load explanation. Please try again.');
        }

        setReportExplanationLoading(false);
      };

      const handleReportSearch = async (event) => {
        event.preventDefault();
        const trimmedQuery = reportQuery.trim();

        if (!trimmedQuery) {
          setReportResult(null);
          setReportMessage('Enter a project name to search.');
          setReportExplanation(null);
          setReportExplanationLoading(false);
          return;
        }

        setReportSearching(true);
        setReportMessage(null);

        try {
          const response = await fetch(`/api/reports/search?q=${encodeURIComponent(trimmedQuery)}`);
          const data = await response.json();

          if (response.ok && data.success) {
            setReportResult(data.match);
            setReportMessage(null);
            setReportExplanation(null);
          } else {
            setReportResult(null);
            setReportMessage(data.message || 'No matching report found.');
            setReportExplanation(null);
          }
        } catch (error) {
          console.error('Report search failed:', error);
          setReportResult(null);
          setReportMessage('Search failed. Please try again.');
          setReportExplanation(null);
        }

        setReportSearching(false);
      };

      const showMessage = (text, type) => {
        setMessage({ text, type });
        setTimeout(() => setMessage(null), 3000);
      };

      const getSeverityColor = (severity) => {
        const colors = {
          High: 'bg-red-100 text-red-800 border-red-200',
          Medium: 'bg-yellow-100 text-yellow-800 border-yellow-200',
          Low: 'bg-blue-100 text-blue-800 border-blue-200'
        };
        return colors[severity] || 'bg-gray-100 text-gray-800 border-gray-200';
      };

      const uniqueSeverities = [...new Set(bugs.map(b => b.severity))];
      const uniqueTypes = [...new Set(bugs.map(b => b.type))];

      // Simple icons as placeholders for now
      const UploadIcon = () => React.createElement('span', null, '⬆');
      const DownloadIcon = () => React.createElement('span', null, '⬇');
      const SearchIcon = () => React.createElement('span', null, '🔍');
      const AlertCircleIcon = () => React.createElement('span', null, '⚠');
      const CheckCircleIcon = () => React.createElement('span', null, '✓');
      const XCircleIcon = () => React.createElement('span', null, '✕');
      const Loader2Icon = () => React.createElement('span', null, '↻');
      const FileJsonIcon = () => React.createElement('span', null, '📄');
      const EyeIcon = () => React.createElement('span', null, '👁');
      const FilterIcon = () => React.createElement('span', null, '🔍');

      return (
        React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-dark-900 dark:via-dark-800 dark:to-dark-900' },
          // Header
          React.createElement('header', { className: 'bg-white border-b border-slate-200 shadow-sm sticky top-0 z-50 dark:bg-white-800 dark:border-dark-700' },
            React.createElement('div', { className: 'max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4' },
              React.createElement('div', { className: 'flex items-center space-x-3' },
                // 0G Icon
                React.createElement('img', { 
                  src: '0g.jpg', 
                  alt: '0G Logo', 
                  className: 'h-12 w-12' 
                }),
                // Chain-Fox Icon
                React.createElement('img', { 
                  src: 'chain-fox.png', 
                  alt: 'Chain-Fox Logo', 
                  className: 'h-8 w-8' 
                }),
                React.createElement('div', { className: 'flex items-center space-x-3' },
                  React.createElement('div', null,
                    React.createElement('h1', { className: 'text-2xl font-bold text-slate-900 dark:text-dark-100' }, 'Automated Web3 Bug Detection'),
                    React.createElement('p', { className: 'text-sm text-slate-600 dark:text-dark-300' }, 'Powered by Chain-Fox, stored securely on 0G')
                  )
                ),
                React.createElement('div', { className: 'flex items-center space-x-3' },
                  React.createElement('button',
                    {
                      onClick: handleAdminToggle,
                      className: `px-4 py-2 rounded-lg font-medium transition-all ${
                        isAdmin 
                          ? 'bg-indigo-600 text-white hover:bg-indigo-700' 
                          : 'bg-slate-200 text-slate-700 hover:bg-slate-300 dark:bg-white-700 dark:text-dark-200 dark:hover:bg-white-600'
                      }`
                    },
                    isAdmin ? 'Admin Mode' : 'User Mode'
                  ),
                  isAdmin && React.createElement('label', {
                    className: 'px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium cursor-pointer hover:from-blue-700 hover:to-indigo-700 transition-all flex items-center space-x-2 shadow-md'
                  },
                    uploading ? React.createElement(Loader2Icon, { className: 'w-5 h-5 animate-spin' }) : React.createElement(UploadIcon, { className: 'w-5 h-5' }),
                    React.createElement('span', null, uploading ? 'Uploading...' : 'Upload JSON'),
                    React.createElement('input', {
                      type: 'file',
                      accept: '.json',
                      onChange: handleFileUpload,
                      className: 'hidden',
                      disabled: uploading
                    })
                  ),
                  isAdmin && fileHash && React.createElement('button',
                    {
                      onClick: downloadFrom0G,
                      className: 'px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg font-medium hover:from-green-700 hover:to-emerald-700 transition-all flex items-center space-x-2 shadow-md'
                    },
                    React.createElement(DownloadIcon, { className: 'w-5 h-5' }),
                    React.createElement('span', null, 'Download from 0G')
                  ),
                  React.createElement('button',
                    {
                      onClick: downloadBugs,
                      className: 'px-4 py-2 bg-white border-2 border-slate-300 text-slate-700 rounded-lg font-medium hover:bg-slate-50 transition-all flex items-center space-x-2 dark:bg-white-800 dark:border-dark-600 dark:text-dark-200 dark:hover:bg-white-700'
                    },
                    React.createElement(DownloadIcon, { className: 'w-5 h-5' }),
                    React.createElement('span', null, 'Export')
                  )
                )
              )
            )
          ),
          
          // Message Toast
          message && React.createElement('div', { className: 'fixed top-20 right-4 z-50 animate-in slide-in-from-top duration-300' },
            React.createElement('div', {
              className: `px-6 py-3 rounded-lg shadow-lg flex items-center space-x-2 ${
                message.type === 'success' ? 'bg-green-500 text-white' : 'bg-red-500 text-white'
              }`
            },
              message.type === 'success' ? React.createElement(CheckCircleIcon, { className: 'w-5 h-5' }) : React.createElement(XCircleIcon, { className: 'w-5 h-5' }),
              React.createElement('span', { className: 'font-medium' }, message.text)
            )
          ),
          
          // Main Content
          React.createElement('main', { className: 'max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8' },
            // Filters
            React.createElement('div', { className: 'bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-6 dark:bg-white-800 dark:border-dark-700' },
              React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-4' },
                React.createElement('div', { className: 'relative' },
                  React.createElement(SearchIcon, { className: 'absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5' }),
                  React.createElement('input', {
                    type: 'text',
                    placeholder: 'Search bugs...',
                    value: searchTerm,
                    onChange: (e) => setSearchTerm(e.target.value),
                    className: 'w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all dark:bg-white-700 dark:border-dark-600 dark:text-dark-100'
                  })
                ),
                React.createElement('div', { className: 'relative' },
                  React.createElement(FilterIcon, { className: 'absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5' }),
                  React.createElement('select', {
                    value: selectedSeverity,
                    onChange: (e) => setSelectedSeverity(e.target.value),
                    className: 'w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none appearance-none transition-all dark:bg-white-700 dark:border-dark-600 dark:text-dark-100'
                  },
                    React.createElement('option', { value: 'all' }, 'All Severities'),
                    uniqueSeverities.map(s => React.createElement('option', { key: s, value: s }, s))
                  )
                ),
                React.createElement('div', { className: 'relative' },
                  React.createElement(FilterIcon, { className: 'absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5' }),
                  React.createElement('select', {
                    value: selectedType,
                    onChange: (e) => setSelectedType(e.target.value),
                    className: 'w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none appearance-none transition-all dark:bg-white-700 dark:border-dark-600 dark:text-dark-100'
                  },
                    React.createElement('option', { value: 'all' }, 'All Types'),
                    uniqueTypes.map(t => React.createElement('option', { key: t, value: t }, t))
                  )
                )
              ),
              React.createElement('div', { className: 'mt-4 flex items-center justify-between text-sm text-slate-600' },
                React.createElement('span', null, `Showing ${filteredBugs.length} of ${bugs.length} bugs`),
                fileHash && React.createElement('div', { className: 'text-xs text-slate-500 truncate max-w-xs' },
                  React.createElement('span', { className: 'font-medium' }, 'File Hash: '),
                  React.createElement('span', { title: fileHash }, fileHash.substring(0, 20) + '...')
                ),
                (searchTerm || selectedSeverity !== 'all' || selectedType !== 'all') && React.createElement('button', {
                  onClick: () => {
                    setSearchTerm('');
                    setSelectedSeverity('all');
                    setSelectedType('all');
                  },
                  className: 'text-blue-600 hover:text-blue-700 font-medium'
                }, 'Clear filters')
              )
            ),

            React.createElement('div', { className: 'bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-6 dark:bg-white-800 dark:border-dark-700' },
              React.createElement('div', { className: 'flex items-center justify-between flex-wrap gap-2 mb-4' },
                React.createElement('div', null,
                  React.createElement('h2', { className: 'text-lg font-semibold text-slate-900 dark:text-dark-100' }, 'Find Audit Reports'),
                  React.createElement('p', { className: 'text-sm text-slate-600 dark:text-dark-300' }, 'Search by project name, symbol, or repository reference.')
                )
              ),
              React.createElement('form', {
                className: 'grid grid-cols-1 md:grid-cols-[minmax(0,1fr)_auto] gap-3',
                onSubmit: handleReportSearch
              },
                React.createElement('div', { className: 'relative' },
                  React.createElement(SearchIcon, { className: 'absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5' }),
                  React.createElement('input', {
                    type: 'text',
                    value: reportQuery,
                    placeholder: 'Search audited projects e.g. "d3-doma"',
                    onChange: (e) => {
                      const value = e.target.value;
                      setReportQuery(value);
                      if (!value.trim()) {
                        setReportResult(null);
                        setReportMessage(null);
                        setReportExplanation(null);
                        setReportExplanationLoading(false);
                        return;
                      }
                      if (reportMessage) {
                        setReportMessage(null);
                      }
                    },
                    className: 'w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all dark:bg-white-700 dark:border-dark-600 dark:text-dark-100'
                  })
                ),
                React.createElement('button', {
                  type: 'submit',
                  disabled: reportSearching,
                  className: `w-full md:w-auto px-4 py-3 rounded-lg font-medium transition-all ${
                    reportSearching
                      ? 'bg-slate-200 text-slate-500 cursor-not-allowed'
                      : 'bg-indigo-600 text-white hover:bg-indigo-700'
                  }`
                }, reportSearching ? 'Searching...' : 'Find Report')
              ),
              reportMessage && React.createElement('p', { className: 'mt-3 text-sm text-slate-500 dark:text-dark-300' }, reportMessage),
              reportResult && React.createElement('div', { className: 'mt-5 border border-slate-200 rounded-lg p-4 bg-slate-50 dark:border-dark-600 dark:bg-white-900' },
                React.createElement('h3', { className: 'text-base font-semibold text-slate-900 dark:text-dark-100' }, reportResult.title),
                React.createElement('dl', { className: 'mt-3 space-y-2 text-sm text-slate-600 dark:text-dark-300' },
                  reportResult.date && React.createElement('div', { className: 'flex items-center gap-2' },
                    React.createElement('dt', { className: 'font-medium w-24' }, 'Date'),
                    React.createElement('dd', null, reportResult.date)
                  ),
                  reportResult.url && React.createElement('div', { className: 'flex items-center gap-2' },
                    React.createElement('dt', { className: 'font-medium w-24' }, 'Report'),
                    React.createElement('dd', null,
                      React.createElement('a', {
                        href: reportResult.url,
                        className: 'text-indigo-600 hover:text-indigo-700 font-medium',
                        target: '_blank',
                        rel: 'noopener noreferrer'
                      }, 'View PDF')
                    )
                  ),
                  reportResult.github_repo && React.createElement('div', { className: 'flex items-center gap-2' },
                    React.createElement('dt', { className: 'font-medium w-24' }, 'Repository'),
                    React.createElement('dd', null,
                      React.createElement('a', {
                        href: reportResult.github_repo,
                        className: 'text-indigo-600 hover:text-indigo-700 font-medium',
                        target: '_blank',
                        rel: 'noopener noreferrer'
                      }, reportResult.github_repo.replace(/^https?:\/\//, ''))
                    )
                  ),
                  reportResult.commit_hash && React.createElement('div', { className: 'flex items-center gap-2' },
                    React.createElement('dt', { className: 'font-medium w-24' }, 'Commit'),
                    React.createElement('dd', { className: 'font-mono text-xs break-all' }, reportResult.commit_hash)
                  )
                ),
                reportResult.hasExplanation
                  ? React.createElement('div', { className: 'mt-4 flex items-center gap-3 flex-wrap' },
                      React.createElement('button', {
                        type: 'button',
                        onClick: handleLoadReportExplanation,
                        disabled: reportExplanationLoading,
                        className: `px-4 py-2 rounded-lg font-medium transition-all ${
                          reportExplanationLoading
                            ? 'bg-slate-200 text-slate-500 cursor-not-allowed'
                            : 'bg-indigo-600 text-white hover:bg-indigo-700'
                        }`
                      }, reportExplanationLoading ? 'Explaining...' : 'Explain by AI'),
                      reportExplanation && React.createElement('span', { className: 'text-sm text-emerald-600' }, 'AI summary loaded')
                    )
                  : React.createElement('p', { className: 'mt-4 text-sm text-slate-500 dark:text-dark-300' }, 'No AI explanation available for this report yet.'),
                reportExplanation && React.createElement('div', {
                  className: 'mt-4 bg-white rounded-lg border border-slate-200 p-4 text-sm leading-relaxed dark:bg-dark-800 dark:border-dark-600 overflow-x-auto',
                  dangerouslySetInnerHTML: { __html: explanationHtml || '' }
                })
              )
            ),
            
            // Bug List
            loading ? (
              React.createElement('div', { className: 'flex items-center justify-center py-20' },
                React.createElement(Loader2Icon, { className: 'w-12 h-12 text-blue-600 animate-spin' })
              )
            ) : filteredBugs.length === 0 ? (
              React.createElement('div', { className: 'bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center' },
                React.createElement(AlertCircleIcon, { className: 'w-16 h-16 text-slate-400 mx-auto mb-4' }),
                React.createElement('h3', { className: 'text-xl font-semibold text-slate-900 mb-2' }, 'No bugs found'),
                React.createElement('p', { className: 'text-slate-600' }, 'Try adjusting your filters or upload a JSON file')
              )
            ) : (
              React.createElement('div', { className: 'grid grid-cols-1 lg:grid-cols-2 gap-6' },
                filteredBugs.map((bug) => 
                  React.createElement('div', {
                    key: bug.id,
                    className: 'bg-white rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-all cursor-pointer overflow-hidden dark:bg-white-800 dark:border-dark-700 dark:hover:bg-white-750',
                    onClick: () => setSelectedBug(bug)
                  },
                    React.createElement('div', { className: 'p-6' },
                      React.createElement('div', { className: 'flex items-start justify-between mb-4' },
                        React.createElement('div', null,
                          React.createElement('h3', { className: 'text-lg font-bold text-slate-900 mb-1 dark:text-dark-100' }, bug.id),
                          React.createElement('p', { className: 'text-sm text-slate-600 dark:text-dark-300' }, bug.project)
                        ),
                        React.createElement('span', {
                          className: `px-3 py-1 rounded-full text-xs font-semibold border ${getSeverityColor(bug.severity)}`
                        }, bug.severity)
                      ),
                      React.createElement('div', { className: 'space-y-2 mb-4' },
                        React.createElement('div', { className: 'flex items-center text-sm' },
                          React.createElement('span', { className: 'text-slate-500 w-24' }, 'Type:'),
                          React.createElement('span', { className: 'text-slate-900 font-medium' }, bug.type)
                        ),
                        React.createElement('div', { className: 'flex items-center text-sm' },
                          React.createElement('span', { className: 'text-slate-500 w-24' }, 'Component:'),
                          React.createElement('span', { className: 'text-slate-900 font-medium truncate' }, bug.component)
                        ),
                        React.createElement('div', { className: 'flex items-center text-sm' },
                          React.createElement('span', { className: 'text-slate-500 w-24' }, 'Detected:'),
                          React.createElement('span', { className: 'text-slate-900' }, bug.detected)
                        )
                      ),
                      React.createElement('button', {
                        className: 'w-full mt-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-medium transition-all flex items-center justify-center space-x-2 dark:bg-white-700 dark:hover:bg-white-600 dark:text-dark-200'
                      },
                        React.createElement(EyeIcon, { className: 'w-4 h-4' }),
                        React.createElement('span', null, 'View Details')
                      )
                    )
                  )
                )
              )
            )
          ),
          
          // Detail Modal
          selectedBug && React.createElement('div', {
            className: 'fixed inset-0 bg-white bg-opacity-50 z-50 flex items-center justify-center p-4',
            onClick: () => setSelectedBug(null)
          },
            React.createElement('div', {
              className: 'bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto dark:bg-white-800',
              onClick: (e) => e.stopPropagation()
            },
              React.createElement('div', { className: 'sticky top-0 bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 rounded-t-2xl' },
                React.createElement('div', { className: 'flex items-start justify-between' },
                  React.createElement('div', null,
                    React.createElement('h2', { className: 'text-2xl font-bold mb-2 dark:text-dark-100' }, selectedBug.id),
                    React.createElement('p', { className: 'text-blue-100 dark:text-dark-300' }, selectedBug.project)
                  ),
                  React.createElement('button', {
                    onClick: () => setSelectedBug(null),
                    className: 'text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-all'
                  },
                    React.createElement(XCircleIcon, { className: 'w-6 h-6' })
                  )
                )
              ),
              React.createElement('div', { className: 'p-6 space-y-6' },
                React.createElement('div', { className: 'grid grid-cols-2 gap-4' },
                  React.createElement('div', null,
                    React.createElement('label', { className: 'text-sm font-semibold text-slate-500 uppercase tracking-wide' }, 'Severity'),
                    React.createElement('span', {
                      className: `inline-block mt-1 px-3 py-1 rounded-full text-sm font-semibold border ${getSeverityColor(selectedBug.severity)}`
                    }, selectedBug.severity)
                  ),
                  React.createElement('div', null,
                    React.createElement('label', { className: 'text-sm font-semibold text-slate-500 uppercase tracking-wide' }, 'Type'),
                    React.createElement('p', { className: 'text-slate-900 font-medium mt-1' }, selectedBug.type)
                  ),
                  React.createElement('div', null,
                    React.createElement('label', { className: 'text-sm font-semibold text-slate-500 uppercase tracking-wide' }, 'Project'),
                    React.createElement('p', { className: 'text-slate-900 mt-1' }, selectedBug.project)
                  ),
                  React.createElement('div', null,
                    React.createElement('label', { className: 'text-sm font-semibold text-slate-500 uppercase tracking-wide' }, 'Commit'),
                    React.createElement('p', { className: 'text-slate-900 font-mono text-sm mt-1' }, selectedBug.commit)
                  ),
                  React.createElement('div', null,
                    React.createElement('label', { className: 'text-sm font-semibold text-slate-500 uppercase tracking-wide' }, 'Detected'),
                    React.createElement('p', { className: 'text-slate-900 mt-1' }, selectedBug.detected)
                  ),
                  React.createElement('div', null,
                    React.createElement('label', { className: 'text-sm font-semibold text-slate-500 uppercase tracking-wide' }, 'Component'),
                    React.createElement('p', { className: 'text-slate-900 mt-1' }, selectedBug.component)
                  ),
                  React.createElement('div', null,
                    React.createElement('label', { className: 'text-sm font-semibold text-slate-500 uppercase tracking-wide' }, 'Version'),
                    React.createElement('p', { className: 'text-slate-900 mt-1' }, selectedBug.version)
                  )
                ),
                React.createElement('div', null,
                  React.createElement('label', { className: 'text-sm font-semibold text-slate-500 uppercase tracking-wide' }, 'Location'),
                  React.createElement('p', { className: 'text-slate-900 mt-1 font-mono text-sm bg-slate-50 p-3 rounded-lg' }, selectedBug.location)
                ),
                React.createElement('div', null,
                  React.createElement('label', { className: 'text-sm font-semibold text-slate-500 uppercase tracking-wide' }, 'Why This Matters'),
                  React.createElement('div', { className: 'text-slate-900 mt-1 bg-amber-50 border border-amber-200 p-4 rounded-lg whitespace-pre-wrap' }, selectedBug.why)
                ),
                React.createElement('div', null,
                  React.createElement('label', { className: 'text-sm font-semibold text-slate-500 uppercase tracking-wide' }, 'Root Cause'),
                  React.createElement('p', { className: 'text-slate-900 mt-1 bg-slate-50 p-4 rounded-lg' }, selectedBug.root_cause)
                ),
                React.createElement('div', null,
                  React.createElement('label', { className: 'text-sm font-semibold text-slate-500 uppercase tracking-wide' }, 'Suggestion'),
                  React.createElement('p', { className: 'text-slate-900 mt-1 bg-green-50 border border-green-200 p-4 rounded-lg' }, selectedBug.suggestion)
                ),
                React.createElement('div', null,
                  React.createElement('label', { className: 'text-sm font-semibold text-slate-500 uppercase tracking-wide mb-2 block' }, 'Buggy Code'),
                  React.createElement('pre', { className: 'bg-slate-900 text-slate-100 p-4 rounded-lg overflow-x-auto text-sm' },
                    React.createElement('code', null, selectedBug.code)
                  )
                )
              )
            )
          ),
          
          // Login Modal
          showLogin && React.createElement('div', {
            className: 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4',
            onClick: () => setShowLogin(false)
          },
            React.createElement('div', {
              className: 'bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 dark:bg-dark-800',
              onClick: (e) => e.stopPropagation()
            },
              React.createElement('div', { className: 'text-center mb-6' },
                React.createElement('h2', { className: 'text-2xl font-bold text-slate-900 mb-2 dark:text-dark-100' }, 'Admin Login'),
                React.createElement('p', { className: 'text-slate-600 dark:text-dark-300' }, 'Please enter your credentials to access admin features')
              ),
              React.createElement('form', { onSubmit: handleLogin },
                React.createElement('div', { className: 'mb-4' },
                  React.createElement('label', { className: 'block text-sm font-semibold text-slate-500 mb-2 dark:text-dark-400' }, 'Email'),
                  React.createElement('input', {
                    type: 'email',
                    value: email,
                    onChange: (e) => setEmail(e.target.value),
                    className: 'w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all dark:bg-dark-700 dark:border-dark-600 dark:text-dark-100',
                    placeholder: 'admin@example.com',
                    required: true
                  })
                ),
                React.createElement('div', { className: 'mb-6' },
                  React.createElement('label', { className: 'block text-sm font-semibold text-slate-500 mb-2 dark:text-dark-400' }, 'Password'),
                  React.createElement('input', {
                    type: 'password',
                    value: password,
                    onChange: (e) => setPassword(e.target.value),
                    className: 'w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all dark:bg-dark-700 dark:border-dark-600 dark:text-dark-100',
                    placeholder: '••••••••',
                    required: true
                  })
                ),
                React.createElement('div', { className: 'flex flex-col space-y-3' },
                  React.createElement('button', {
                    type: 'submit',
                    className: 'w-full px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md'
                  }, 'Login'),
                  React.createElement('button', {
                    type: 'button',
                    onClick: () => setShowLogin(false),
                    className: 'w-full px-4 py-3 bg-slate-200 text-slate-700 rounded-lg font-medium hover:bg-slate-300 transition-all dark:bg-dark-700 dark:text-dark-200 dark:hover:bg-dark-600'
                  }, 'Cancel')
                )
              )
            )
          )
        )
      );
    };
    
    // Render the app
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(React.createElement(BugTrackerApp));
  </script>
</body>
</html>
